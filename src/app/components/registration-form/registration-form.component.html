<div class="form-container">
    <h2>Rejestracja</h2>

    <div *ngIf="currentUser; else registrationFormTemplate">
        <p>Jesteś już zalogowany <strong>{{ currentUser.name }}</strong>.</p>
        <p>Jeżeli chcesz zarejestrować nowe konto, wyloguj się z obecnego.</p>
    </div>

    <ng-template #registrationFormTemplate>
        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
            <label for="name">Imię:</label>
            <input id="name" type="text" formControlName="name" aria-label="Imię użytkownika" required />
            <small *ngIf="registerForm.get('name')?.invalid && registerForm.get('name')?.touched" role="alert">
                Imię jest wymagane.
            </small>

            <label for="email">E-mail:</label>
            <input id="email" type="email" formControlName="email" aria-label="Adres e-mail" required />
            <small *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched" role="alert">
                Podaj poprawny e-mail.
            </small>

            <label for="password">Hasło:</label>
            <input id="password" type="password" formControlName="password" aria-label="Hasło użytkownika" required />
            <small *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched" role="alert">
                Hasło musi posiadać minimalnie 6 znaków.
            </small>

            <label for="age">Wiek:</label>
            <input id="age" type="number" formControlName="age" aria-label="Wiek użytkownika" required />
            <small *ngIf="registerForm.get('age')?.invalid && registerForm.get('age')?.touched" role="alert">
                Musisz posiadać 18 lat, aby dokonać rejestracji.
            </small>

            <label for="city">Miasto:</label>
            <input id="city" type="text" formControlName="city" aria-label="Miasto użytkownika" required />
            <small *ngIf="registerForm.get('city')?.invalid && registerForm.get('city')?.touched" role="alert">
                Miasto jest wymagane.
            </small>

            <label for="phone">Telefon kontaktowy:</label>
            <input id="phone" type="text" formControlName="phone" aria-label="Telefon kontaktowy" required />
            <small *ngIf="registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched" role="alert">
                Podaj poprawny numer telefonu.
            </small>

            <label for="terms">
                <input id="terms" type="checkbox" formControlName="terms" aria-label="Akceptacja regulaminu" required />
                Zgadzam się na rejestrację w serwisie.
            </label>
            <small *ngIf="registerForm.get('terms')?.invalid && registerForm.get('terms')?.touched" role="alert">
                Aby ukończyć rejestrację, musisz zaakceptować.
            </small>

            <button type="submit" [disabled]="registerForm.invalid">Zarejestruj</button>
        </form>
    </ng-template>
</div>
