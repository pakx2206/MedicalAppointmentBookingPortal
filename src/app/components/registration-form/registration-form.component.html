<div class="form-container">
    <h2>Rejestracja</h2>

    <div *ngIf="currentUser; else registrationFormTemplate">
        <p>Jesteś już zalogowany <strong>{{ currentUser.name }}</strong>.</p>
        <p>Jeżeli chcesz zarejestrować nowe konto, wyloguj się z obecnego.</p>
    </div>

    <ng-template #registrationFormTemplate>
        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
            <label>
                Imię:
                <input type="text" formControlName="name" />
                <small *ngIf="registerForm.get('name')?.invalid && registerForm.get('name')?.touched">
                    Imię jest wymagane.
                </small>
            </label>

            <label>
                E-mail:
                <input type="email" formControlName="email" />
                <small *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
                    Podaj poprawny e-mail.
                </small>
            </label>

            <label>
                Hasło:
                <input type="password" formControlName="password" />
                <small *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
                    Hasło musi posiadać minimalnie 6 znaków.
                </small>
            </label>

            <label>
                Wiek:
                <input type="number" formControlName="age" />
                <small *ngIf="registerForm.get('age')?.invalid && registerForm.get('age')?.touched">
                    Musisz posiadać 18 lat, aby dokonać rejestracji.
                </small>
            </label>

            <label>
                Miasto:
                <input type="text" formControlName="city" />
                <small *ngIf="registerForm.get('city')?.invalid && registerForm.get('city')?.touched">
                    Miasto jest wymagane.
                </small>
            </label>

            <label>
                Telefon kontaktowy:
                <input type="text" formControlName="phone" />
                <small *ngIf="registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched">
                    Podaj poprawny numer telefonu.
                </small>
            </label>

            <label>
                <input type="checkbox" formControlName="terms" />
                Zgadzam się na rejestrację w serwisie.
                <small *ngIf="registerForm.get('terms')?.invalid && registerForm.get('terms')?.touched">
                    Aby ukończyć rejestrację, musisz zaakceptować.
                </small>
            </label>

            <button type="submit" [disabled]="registerForm.invalid">Zarejestruj</button>
        </form>
    </ng-template>
</div>
